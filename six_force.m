function [y1] = six_force(x1)

% 
% [y1] = six_force(x1) takes these arguments:
%   x = 8xQ matrix, input #1
% and returns:
%   y = 6xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.00061649;-0.000527675;-0.000427794;-0.000628879;-0.001937543;-0.00310943840678963;-0.00027497;-0.00313259001111595];
x1_step1.gain = [19.4475188958327;19.0947288904064;13.0131404557598;12.5056321628589;12.7834266937902;29.5994687855538;21.101884246153;15.9830386275749];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.10271434074991576957;0.9485885922369052814;0.41554276452995364544;-0.90055860007426102865;1.1143552183848497439;0.73234710216075804556;-0.23328610952387082711;1.7473609857643146448;1.4305152240658072227;0.90988737230270455569;-0.70325055723333418367;-1.8618297517843160893;-0.89506689505083325553;-0.41951890077565318071;0.24941282134897141409;0.10881848879338061609;-0.70975698886983529245;-0.083519359427923434147;-2.3437312516073864899;0.20325990857097819831];
IW1_1 = [-1.3114228697850509597 1.7296018984652203887 0.37145422155468144076 0.6555570490159964292 0.74431523626901108237 0.18298111685528320458 -2.8986885028060020986 1.0367132346623533223;-2.2437033135877588741 0.82631275664322190178 -0.43340273143959284763 -0.033906988679196357894 2.0957221223905246887 -1.1935512433825707923 0.35022133947551570277 -0.31341005140222405467;1.0437857435115609483 -0.171348170437649161 -0.39506505439078415387 -0.65353213947635468983 -1.1393132004910375699 0.41787651239622464194 1.9469667674842869864 -0.81772443020882457088;-0.56771285525660242222 -2.3402378683396691805 2.0205860638748660563 3.6128273015682190739 0.46979567100228142307 -1.1970289284300905663 -1.0082648737231465486 -1.4045050898449238375;-1.2495552766050579407 -0.89364940522208280438 1.5620728517216608822 1.7543862008891459858 0.092260937221551875265 0.9280947964270782613 -2.1915552835553886446 1.9145811419253468966;-1.5019266658981451634 0.91320855481372831264 1.0199681142409471324 -0.90754283617993547484 -0.59800425868887618908 0.7247439549322323149 0.024749351381848576359 0.80975718963956455632;-0.8532549240933968715 0.026301928639686156935 -0.24200231520366866089 -0.27453847976704709444 1.8537271939999113712 -0.35215225256676396803 -0.60621872368498164185 0.16552607547204867267;-0.6340322040905954637 -0.10986042120109032472 0.9695802094307539587 1.07250617468795717 -1.0624865385877126922 0.018842490740122671417 -1.1171792494562737819 0.67047626315644248685;-4.1762326561597822305 0.94622239206854641402 -0.2819304146941101763 -0.31226783720524881049 2.3949971217309697913 -0.87891622097972466054 0.36805836592091639714 0.41757120959253229975;-0.92795212428046580655 -1.89709147148884405 1.4602569635253734859 1.3512925101590189669 0.083896446718935105413 1.1133159979628841629 -0.60952664917399956845 1.1195317143501140045;2.5289305087661029248 -1.2803569462854407224 -0.2687127532725561152 1.4427500254636334009 -1.8168926641417433299 -0.53513782850774083144 -0.49519851866357211811 0.49166711391452788682;-2.630432283743198596 1.9770877382977540826 0.50560438202334567759 -2.0933619098862155106 3.0371039258872842836 0.079723795476163955565 -1.2313020057399088891 2.7465505509414804841;0.48154665881761932189 1.0623451465358813017 -0.44779570644571065063 0.26073288523020482499 -1.5452982243725039702 -0.44172280456539625426 -0.82876956682546065736 0.027518907058653088032;-0.79822241304967578301 1.3163859544924532141 -0.27014079829239862063 0.41912250713803445024 -0.17469635099444968951 0.11894492135480218276 -0.99622160699100215098 -0.21435223144007098384;2.0056887334920481258 2.5064249519351267104 -0.99787638462155259234 -0.55877561752447846288 -0.79488122599467958551 1.3166218659829107551 -3.533804665421143909 1.9329687616109392234;1.499711105508240605 -0.061460923882420637199 -0.59627798317139901751 1.2524167140039648149 -2.3861441512981342861 1.1567002128701455721 -2.5645019746640480562 0.87128966830282950085;1.5941132816177583376 0.13528913318873536653 0.35867371304773931762 0.055157590805382718246 0.81895988501016858674 -0.79429937738680889137 0.43681334350334111161 -1.8316831521510767988;1.4855298001328793855 0.13190560678684226659 -1.3981279999005395975 0.13732811764013316824 0.2079429229259613654 -0.45762869714919890418 0.23060027487694889636 -1.0822932364662436466;-4.475188419147872132 -2.8199669688739987805 2.4678733274112909513 -1.792397187803830283 3.5459396397362241693 -0.044747620660660299141 5.3092376012711799405 -0.89759771854232250909;-1.8512210943877285274 -0.040092588292982241083 0.46899103517170298572 -0.039784530913930360452 2.1119588953429215827 -1.4675344279960276239 1.4798939490298921307 -1.5459636377935588314];

% Layer 2
b2 = [1.3024805680108830774;1.4953984561014577181;0.15586060725016431805;0.39828696532887980508;-2.7811609170811224523;0.13769226557590055759;-2.3124314127573946109;1.4444325862231823798;-0.93587047759225650001;-1.1284639060244074926];
LW2_1 = [-0.4828022624686756914 0.34022703666357834162 -0.02998785140022971335 0.33106938418395320811 -0.18002775234173490349 -0.019389253142526895191 0.44791450555066986139 -1.2636120428181276676 0.34849856882953300641 -0.18526028781865805373 0.3187282815825066562 -0.22741309979528420704 -0.14821417513540344202 1.0417449968724072917 -0.18800257353040011887 -0.16988247565180353282 0.43989947928761413687 -0.23213644184768209011 -1.3456344231477015416 -0.83337507918733177981;-0.21139538777079333598 0.47578003000742996598 2.0959504707009064539 0.71026759837435560208 -2.4330104175957951718 0.9399981242700253814 3.1990235867515988133 -1.3515684285455518143 0.45867254697184645096 0.98592110342295413705 1.8273680211798466466 -1.1343666741619797822 -1.4787641136681468623 2.2484016750647835003 -0.52979522689724134477 -0.11011130950681975726 1.0552455953751005424 -1.1713605812169725073 1.3164616556957413618 -1.7199169384415069484;0.32770171426908428769 2.0879053136043315142 1.1932700227681873884 0.11109377267547816681 -0.088163176755456332256 0.31679478741422489874 0.82360498640557489036 0.78470789002601792905 -0.22612947881820244511 0.088229186425763453383 -0.38220736720436682132 -0.10738968550283718717 0.14032036954122595329 0.17795457302109779496 0.0032779202679962728822 0.31045086577910752101 0.4742038863642349944 -0.8462440151827151924 0.83530576597988592802 -0.62705466410606425232;-0.42150407694879216125 -1.9094448376464014938 1.1992289150602606362 0.36402918010449364372 -0.48355125471924564895 1.9354808450297451561 1.8372984223387760494 0.43869192772242499023 0.99734919081520290174 0.21304643381352936227 1.113775869012318509 -0.058607763481623123547 -0.72663177584321503311 1.9584032328842966297 0.66362770837719942119 -0.15966446201942677274 -0.25021877937826664251 1.3679580109438131963 -0.80083510129547408329 0.73910416824793967461;2.4158255367256629143 0.32849024751773048258 1.8738577810989398564 1.1542127347134640836 0.44561065504711061536 -0.029226232310322845104 -2.6233320035831915185 3.6228759907893466341 -1.1128951979704650999 -0.32808713007968154374 0.23378105624303041621 1.7638340014826570101 -0.83365704367844506439 1.0632283564187678948 0.082507972594738201999 -0.87397855845369276651 -0.87905611303065167572 2.5319750200705652965 1.3990655796681397138 -0.36750517758614742458;2.3849339500460713381 -3.7006875755140202777 1.7798700726463270172 -0.21782420065810720322 -1.3294575848598759737 0.94911087560810958319 2.3125215221352677375 -0.92780112106918899428 1.8136355910373151978 1.1788938699240887331 1.6571265426393715359 0.60869315598585937988 0.41346707185190728628 -0.28388042870024715603 0.050037602409147549642 -1.1041818234111042685 -0.6399894713143498004 1.473257677563499346 -0.66943471075678318005 0.1094307250846493218;-0.3946598550611831735 -2.3680243246554635306 -0.57561006697169614377 0.058805719813713096256 -0.38873277848941628632 0.084174507583417754186 0.31767691741412923401 1.349174282003153591 0.25030326740519909245 -0.056482876226384738649 1.157170826898605176 -1.2770090380661283103 -0.71584401737873482041 0.72429131500581966918 0.024023821549973116418 -0.19389653755483340913 -0.43951177196557461579 0.58648358892160656897 -0.36024703896216575538 0.7193087961914368389;-1.8192516921659043216 -1.9918498716977723895 -1.7725052628125415044 -1.5082758979250754372 1.110328107652539309 1.7597035690763660476 0.92579459917564554949 -0.12685407205841758849 2.1817627838417839037 -1.175970223851620089 3.7379634257535703235 0.79929284453919791087 -2.5110829537604346662 5.2372501341004014108 0.35210091248685265741 2.0904916771123756014 2.9874754438615851448 -0.62449147039390517921 -3.2401477787807193565 1.3210597591844199794;0.57472603981688374919 1.6184363593433825912 0.44928438572730922118 -0.14962297410020466981 0.61991502556914679367 0.45130750835537797316 -0.57591348055348601243 1.319915400668758787 -0.38497469258086436383 0.14069169195127853578 -1.3729778239506020832 -0.75444167944338857978 0.86728898897411610402 -1.5326905192327060501 0.18903297617103545503 0.29478598830555524657 -0.19788040375746551724 0.64869072023099716429 2.7550760608239217575 0.19074321855024078953;0.45914708587117736283 -0.35259956734333725015 -0.89174793960958531613 -0.42454680000359124037 1.7385277396943827899 0.80250359563448936395 -1.2756003197782437297 1.3067763780310117649 -0.1265124979119162385 -0.68102595454261671826 -0.31817424722592413389 0.45895658128390542929 1.0127486735804835938 -0.80856062701669306758 0.49801587882986059208 0.046111368559550940105 -0.7138007095587439732 1.1420111836901394309 -1.0850487312739018897 0.8044047510153037317];

% Layer 3
b3 = [3.2840004628810994802;-1.2671571566046804236;2.8458532190255865224;1.1562864182748433528;-1.4175284755805859227;0.28500815038908383636];
LW3_2 = [1.4577787591021993396 0.78589831009481858626 -0.79815901414358536581 -3.2335354213165379278 -2.3302956721487269043 1.3655189821956306151 2.2746472833446946815 0.68288113259134941568 2.5879060097041746147 -1.7385269437160983941;0.66288989950354060277 -3.1501685158047911806 2.4557282934974922206 0.97690087845357775898 1.1762074252033998256 0.68430809170978723621 -0.34630228162400472636 -0.71451113767198226601 -1.6684325935415176279 -1.8534017327754614968;-1.609802716372862097 0.29801151205149828405 -0.98149125116695712379 0.46727711225456980415 1.9503203238617103921 -0.19157458095305726631 -2.2784012065728513896 -1.3358713303045555154 -1.4298022936998444621 0.64619007696343022662;-1.1065291145852713672 -0.58506611971673905259 0.26035287312385324565 -0.37863100492859891322 -1.8324618435264969918 3.2413155433634810443 0.58258072545683015075 1.2519459787215223567 0.41064398545689922981 -0.34003024253235025753;0.67834996230984101473 -0.21156355686366143387 -2.5350119629314802339 0.57948509942720416444 -2.3628702695836203418 1.2785097359444794751 -0.3749061397400775264 1.0628600932099727672 0.84758471774852095493 -0.79375579346133762204;2.4626390629823187162 1.5422870221861735285 -1.5339346997495366676 -2.1261344518792681946 1.3607413615246528593 -1.100455314214238145 -0.17596718359445667756 0.39373929672005036906 0.83110865027660363324 1.57581614858120167];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.154558859275748;0.145551376546826;0.14103147387302;0.0177234374706006;0.0179812296243432;0.0385572905299959];
y1_step1.xoffset = [-7.53068721963674;-7.53068721963674;0;-56.12;-54.5021720055826;-24.2038238458094];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
